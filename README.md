# graphic_game
### Игра "от первого лица" по технологии Raycasting.<br/>
#### Данный проект был реализован в рамках обучения в Школе 21. Цель данного проекта: изучить технологию Raycasting по созданию псево 3D и создать игру.
В качестве усложнения проекта — запрещалось использовать какие либо графические "движки" или сторонние библиотеки. Для реализации предоставлялась только MLX библиотека, которая по сути могла только задавать цвет пикселю по указанным координатам.<br/>
### Дополнительным плюсом была бы разработка:<br/>
* Нескольких игровых уровней.<br/>
* Врагов и оружие.<br/>
* Использование текстур для стен/пола/потолка и предметов.<br/>
* Реализовать более 1 вида объектов.<br/>
* Использовать мышку для вращения.<br/>
* Возможность смотреть вверх/вниз.<br/>
* Открывать двери.<br/>
* Секретные комнаты.<br/>
* Озвучка и фоновая музыка.<br/>
* Сюжет.<br/>
****
Мною были реализованы все эти требования. Игра получилась в жанре "шутер от первого лица, квест" в стилистике игры серии Tomb Raider.<br/>
Для монстра были разработаны 18 текстур для отображения всех его действий: <br/>
+ 3 положения тела (левая нога впереди, права нога впереди, ноги вместе) для 4 сторон (левый бок, правый бок, перед, спина).<br/>
+ 5 положений (взмахи руками) для атаки героини.<br/>
+ 1 положение (прыжок) при успешной атаки по монстру.<br/>
+ 1 текстура смерти монстра.<br/>
***
В зависимости от направления взгляда монстра и взгляда игрока - определяется нужная текстура для отображения. После определения текстуры с определенной задержкой сменяются текстуры положения теля для имитации ходьбы монстра. <br/>
Разработан алгоритм нейтрального поведения монстра:<br/>
- движение в любую сторону, после столкновения со стеной<br/>
- монстр отклоняется на случайный угол и может изменить скорость передвижения. <br/>
- При приближении героини слишком близко к монстру - он начнет атаковать, но если успеть выйти из этой зоны - монстр потеряет интерес и продолжит своё движение.<br/> 
***
Также у монстра прописан алгоритм агрессии: <br/>
- в этом случае он направляется к игроку и атакует. <br/>
- если монстр не видит игрока - то двигается по карте так же случайно, пока игрок снова не попадет в поле его зрения. <br/>
***
В первой локации существует ловушка: как только игрок находит оружие - появляется соблазн напасть на монстра, но из-за шума выстрелов из джунглей прибегает ещё группа врагов и уже игроку не хватит патрон.<br/>
***
Все слова и звуки героини были записаны для этого проекта самостоятельно.<br/>
В игре присутствует своя фоновая музыка для каждого уровня. Также существует несколько кат-сцен.<br/>

В игре присутствует логическая задача- для открытия тайника требуется переместить статуи на свои места. В игре есть "пасхалка" - комната с фотографиями людей, кто приложил руку к этому проекту.<br/>
***
### Основная идея Raycasting.
Идея заключается в следующем: карта представляет собой двумерную квадратную сетку, и каждый квадрат может иметь значение 0 (= без стены) или положительное значение (= стена с определенным цветом или текстурой).

Для каждого x экрана (то есть для каждой вертикальной полосы экрана шириной в 1 пиксель) отправьте луч, который начинается в местоположении игрока и с направлением, которое зависит как от направления взгляда игрока, так и от x-координаты экрана. Затем позвольте этому лучу двигаться вперед по 2D-карте, пока он не коснется квадрата карты, который представляет собой стену. Если он ударился о стену, рассчитайте расстояние от этой точки попадания до игрока и используйте это расстояние, чтобы вычислить, насколько высоко эта стена должна быть нарисована на экране: чем дальше стена, тем меньше она на экране и тем ближе, тем выше она кажется. Это все двухмерные расчеты.<br/>
Пример карты:<br/>

11111111111      1 - стена<br/>
10000000001      0 - пустое пространство<br/>
10200N00001      N - положение игрока<br/>
10000000001      2 - объект на карте<br/>
11111111111<br/>

Угол обзора игрока составляет 66 градусов - это максимальный обзор, при превышении которого изображение начинает искажаться и возникает эффект "рыбьего глаза".<br/>
На экране отображается только тот сектор, который "видит" игрок из своих глаз и это изображение распределяется по всей ширине окна игры.<br/>

### Технические аспекты:.<br/>
Для запуска игры необходимо разархивировать 3 архива в папке srcs, затем запустить из терминала команду: ./Cub3D map.cub.<br/>
Такой формат запуска регламентирован требования ТЗ.
Файл map.cub - подгружаемая карта. В ней можно Задать размеры экрана, изменить текстуры объектов или отредактировать саму карту.<br/>

Видео прохождения игры: https://youtu.be/2l3gA7nGqgI<br/>
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export.png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(1).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(2).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(3).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(4).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(5).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(6).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(7).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(8).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(9).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(10).png)
![Скриншот сортировки из видео:](https://github.com/AlexArhipov/graphic_game/blob/main/photoeditorsdk-export%20(11).png)

